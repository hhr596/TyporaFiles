### 嵌入式简答题

1. 什么是嵌入式系统？

   嵌入式系统是以应用为中心，以计算为基础，软硬件可裁剪，适应于应用系统对功能，可靠性，成本，体积，功耗等方面有特殊要求的专用的计算机系统。

2. 请叙述嵌入式系统的特点有哪些？

   （1）“嵌入性“：要适应对象系统的环境

   （2）”专用性”：裁剪以满足对象配置的最低要求

   （3）“系统对口”：配有与对象系统相适应的接口电路

3. 请说明哈佛体系结构和冯诺依曼体系结构有何不同？

   （1）冯诺依曼结构中：指令和数据存储在相同的内存空间（地址不同），二者总线相同，数据宽度相同，无法同时存取。

   （2）哈佛体系结构中：指令和数据存储在不同的内存空间中，二者采用不同总线，可同时进行存取。

4. 请说明常用嵌入式处理器分成哪几类？

   嵌入式微处理器主要可分为四类：

   （1）微控制器（如Arduino）：控制被嵌入设备的相关动作，市场份额70%。

   （2）嵌入式DSP处理器：数字信号处理器，支持浮点运算，弥补单片机与ARM无法处理浮点数的不足。

   （3）嵌入式微处理器（如ARM，树莓派）

   （4）嵌入式片上系统SoC：专用的一种计算机系统（一种趋势），用于手机、平板。

5. 什么是CISC和RISC？RISC的主要特点是什么？

   嵌入式微处理器按指令系统可分为：RISC（Reduced Instruction Set Computer）和CISC（Complex Instruction Set Computer）。

   RISC的特点是精简了指令数目和寻址方式，指令并行执行程度更好，编译器的效率更高。

6. 解释下列术语或指令：JTAG，BLX，MVN，LR，CPSR，SPSR，BSP，SOC，LKM，JFFS，YAFFS，GPIO，IIC，U-Boot，Thumb状态，ThumbEE状态。

   JTAG: Joint Test Action Group 联合测试行动小组，是1985年指定的检测PCB和IC芯片的一个标准，可以对具有JTAG接口的芯片硬件电路进行边界扫描和故障检测。

   BLX: Branch with Link and exchange 带返回和状态切换的跳转指令, 从ARM指令集跳转到指令中所指定的目标地址，并将处理器的工作状态有ARM状态切换到Thumb状态，该指令同时将PC的当前内容保存到寄存器R14中

   MVN: Move NOT 数据非传送, 将操作数取反后传送

   LR：Link Register 链接寄存器，即R14寄存器，用于存储返回链接

   CPSR：Current Program Status Register 程序状态寄存器，保存当前程序运行的状态信息

   SPSR： Saved Program Status Register 备份程序状态寄存器在程序运行被异常中断时保存现场。

   BSP：Board Support System 板级支持包，由芯片厂商提供的驱动程序，用于配置硬件、完成硬件与软件间的数据交互。

   SOC：System On a Chip 嵌入式片上系统，专门的一种计算机系统（一种趋势，用于手机、平板等）

   LKM：Loadable Kernel Module 可装载模块，可在内核运行时加载到内核的一组目标代码。

   JFFS：Journaling Flash File System，是一种专门针对嵌入式系统中的Flash存储器的特性而设计的一种日志文件系统。

   YAFFS：Yet Another Flahs File System，是一种专为嵌入式系统使用NAND型闪存而设计的日志型文件系统。

   GPIO：General-Purpose Input/Output Ports 通用编程I/O端口，是CPU引脚，通过GPIO向外输出高低电平，或者读入引脚状态。

   IIC：Inter-Integrated Circuit，是一种同步串行总线协议，用于连接微控制器及外围设备。

   U-Boot：Universal BootLoader，是遵循GPL条款的BootLoader程序，用于初始化CPU和硬件，再装载并启动操作系统

   Thumb状态：执行16位或32位班子对齐的Thumb-2指令集指令。

   ThumbEE状态：执行为动态产生目标而设计的16位或32位半字对齐的Thumb-2指令集的变体。

7. 什么是嵌入式操作系统？相比通用操作系统，它具有哪些突出特点？

   嵌入式操作系统是一种支持嵌入式系统应用的操作系统软件，它是嵌入式系统的极为重要的组成部分。

   特点：在系统实施高效性、硬件的相关依赖性、软件固化以及应用的专用性等方面有突出的特点。

8. 简述ARM处理器的异常处理过程？

   （1）进入与特定的异常相应的运行模式

   （2）保存当前CPSR值到对应模式下的SPSR_mode中

   （3）当引起异常指令的下一条指令存入相应的链接寄存器LR，若是Thumb下的异常则同时保存PC的偏移量到LR。

   （4）设置CPSR寄存器的低5位，使处理器进入相应的工作模式。设置I=1以禁止IRQ中断；如果进入复位模式或FIQ模式，还要设置F=1以禁止FIQ中断。

   （5）根据异常类型，将对应的向量地址强制复制给程序计数器PC，以便执行相应的异常处理程序。

   （6）完成后恢复原来的用户寄存器，将SPSR_mode复制到CPSR

   （7）将LR的内容复制到PC，返回到异常中断的指令的下一条开始执行

   （8）清楚CPSR的中断屏蔽标志位I和F

9. 什么是内核？内核的主要组成部分有哪些？

   内核指的是一个提供硬件抽象层、磁盘及文件系统控制、多任务等功能的系统软件，不是一套完整的操作系统。

   主要组成部分：

   （1）系统调用接口

   （2）独立于体系结构的内核代码

   （3）与体系结构相关代码

10. 内核空间物理页分配技术主要使用了哪些方法？

    主要使用了：

    （1）伙伴算法：尽量减少不连续情况

    （2）基于Slab分配器的管理技术

    （3）内核非连续内存分配（Vmalloc）

11. 什么是根文件系统？其主要配置目录有哪些？

    是一种特殊的文件系统，是内核启动时挂载的第一个文件系统，保存了内核代码的映像文件。

    主要配置目录：

    （1）/bin目录。该目录下的命令可以被root与一般账号所使用。

    （2）/sbin目录。该目录下存放系统命令，只有系统管理员能够使用。

    （3）/dev目录。该目录下存放的是设备与设备接口的文件。

    （4）/etc目录。该目录下存放着系统主要的配置文件。

    （5）/lib目录。该目录下存放共享库和可加载驱动程序。

    （6）/home目录。系统默认的用户文件夹，每个普通用户都有一个以用户名命名的子目录，存放用户相关的配置文件。

    （7）/root目录。系统管理员的主文件夹，根用户的目录。

    （8）/usr目录。存放共享、只读的程序和数据。

    （9）/var目录。存放可变的数据。

    （10）/proc目录。是个空目录，常作为proc文件系统的挂接点。

    （11）/mnt目录。用于临时挂载某个文件系统的挂接点，通常是空目录。

    （12）/tmp目录。用于存放临时文件，通常是空目录。

12. 作为Linux内核的重要组成部分，设备驱动程序主要完成哪些功能？

    （1）对设备初始化和释放

    （2）把数据从内核传送到硬件和从硬件读取数据

    （3）读取应用程序传送给设备文件的数据和回送应用程序请求的数据。

    （4）检测错误和处理中断

13. 简述交叉开发模式采用的三个步骤？

    １．在主机上编译BootLoader（引导加载程序），然后通过JTAG接口烧写到目标板。

    ２．在主机上编译Linux内核，然后通过BootLoader下载到目标板以启动或烧写到Flash。

    ３．在主机上编译各类应用程序，通过NFS运行、调试这些程序，验证无误后再将制作好的文件系统映像烧写到目标板。

14. 简要说明嵌入式Linux系统移植过程？

    （1）构建嵌入式Linux开发环境，包括硬件环境和软件环境；其次，移植引导加载程序BootLoader；

    （2）移植Linux内核和构建根文件系统；

    （3）移植或开发设备驱动程序。（根据需要移植GUI）

15. Linux设备驱动程序分类有哪些？

    1. 字符设备：传输数据以字符为单位进行的设备。例如键盘、串口、控制台等。
    2. 块设备。对信息的存取以“块”为单位。如光盘、磁盘、磁带等。
    3. 网络设备。处理网络事务的设备。例如交换机、路由器等。

16. Linux设备驱动程序是如何加载进内核的？

    通常可通过两种方式进行加载：

    1. 将驱动程序编译成模块形式进行动态加载，常用命令有insmod（加载）、rmmod（卸载）等；
    2. 静态编译，将驱动程序直接编译放进内核。

17. 字符设备驱动程序编写通常都要涉及三个重要的内核数据结构，请简要叙述。

    （1）File_operations结构体，为用户态应用程序提供接口，是系统调用和驱动程序关联的重要数据结构。

    （2）File结构体，表示一个抽象的打开的文件。file_operations结构体是file结构体的一个成员。

    （3）Inode结构体，表示一个文件。

18. Linux设备模型的主要功能有哪些？

    （1）电源管理和系统关机

    （2）与用户空间通信

    （3）热插拔设备管理

    （4）设备类型管理

    （5）对象生命周期处理

19. 什么是嵌入式数据库系统？其主要特点是什么？

    ​    嵌入式数据库系统是指支持移动计算或某种特定计算模式的数据库管理系统，通常与操作系统和具体应用集成在一起，运行在智能型嵌入式设备或移动设备上。

    主要特点：

    （1）嵌入性。不仅可以嵌入到软件，也可以嵌入到硬件。

    （2）移植性。能适应各种系统差异性。

    （3）安全性。为了保护关键数据，对存取权限的控制比较严格。

    （4）实时性。如果想要，可以实现很好的实时性。

    （5）可靠性。要适应没有人工干预的长时间不断运行，因而具备较强的的底层控制能力。

    （6）主动性。能够主动监视当前信息，推断当前未来状态的出现。

20. 什么是嵌入式文件系统？请简要说明嵌入式Linux文件系统的层次结构。

    ​    嵌入式文件系统是指嵌入式系统中实现文件存取、管理等功能的模块，这些模块提供一系列文件输入输出等文件管理功能，为嵌入式系统和设备提供文件系统支持。

    层次结构：

    从低到顶分为四层：硬件层、驱动层、内核层和用户层。

    整体层次结构如下：

    ![IMG_3618](/Users/tablee/Downloads/IMG_3618.jpg)

